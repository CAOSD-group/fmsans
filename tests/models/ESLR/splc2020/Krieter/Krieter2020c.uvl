namespace BerkeleyDb

features
	BerkeleyDb {abstract}	
		mandatory
			BerkeleyDB {abstract}	
				optional
					FLogging {abstract}	
						mandatory
							Logging {abstract}	
								optional
									featureLoggingFile
									featureLoggingConsole
									featureLoggingDbLog
									featureLoggingFinest
									featureLoggingFiner
									featureLoggingFine
									featureLoggingInfo
									featureLoggingConfig
									featureLoggingSevere

								mandatory
									featureLoggingBase

				mandatory
					FPersistency {abstract}	
						mandatory
							Persistency {abstract}	
								optional
									FPersistencyFeatures {abstract}	
										or
											featureChecksum
											featureFileHandleCache
											featureHandleFullDiscError
											featureEnvironmentLock
											Checkpointer {abstract}	
												optional
													featureCustomizableCheckpointerTime
													featureCustomizableCheckpointerBytes
													featureCheckpointerDaemon
											Cleaner {abstract}	
												optional
													featureLookAheadCache
													featureCleanerDaemon

								mandatory
									FIOFeature {abstract}	
										alternative
											NIO {abstract}	
												optional
													featureDirectNIO

												mandatory
													FNIOType {abstract}	
														alternative
															featureNIO
															featureChunkedNIO
											IO {abstract}	
												optional
													featureSynchronizedIO

												mandatory
													featureIO

				optional
					FStatistics {abstract}	
						mandatory
							Statistics {abstract}	
								mandatory
									FStatisticsFeatures {abstract}	
										or
											EnvStats {abstract}	
												optional
													featureStatisticsEnvLog
													featureStatisticsEnvINCompressor
													featureStatisticsEnvFSync
													featureStatisticsEnvEvictor
													featureStatisticsEnvCleaner
													featureStatisticsEnvCheckpointer
													featureStatisticsEnvCaching

												mandatory
													featureStatisticsEnvBase
											featureStatisticsDatabase
											featureStatisticsLock
											featureStatisticsPreload
											featureStatisticsSequence
											featureStatisticsTransaction
									featureStatisticsBase
					featureMemoryBudget
					FConcurrency {abstract}	
						or
							featureLatch
							featureFSync
							featureTransaction
							dummyFeatureLocking
							featureCheckLeaks
					FDbOperation {abstract}	
						or
							featureDeleteDb
							featureTruncateDb

				mandatory
					FBtree {abstract}	
						mandatory
							BTree {abstract}	
								optional
									featureVerifier
									featureTreeVisitor
									featureINCompressor
									FEvictor {abstract}	
										mandatory
											Evictor {abstract}	
												optional
													featureCriticalEviction
													featureEvictorDaemon

												mandatory
													featureEvictor
					BASE

constraints
	featureEvictor | featureEvictorDaemon | featureLookAheadCache | featureStatisticsEnvCaching => featureMemoryBudget
	featureCheckLeaks => featureStatisticsLock
	featureCriticalEviction => featureINCompressor
	featureCustomizableCheckpointerBytes => featureCustomizableCheckpointerTime
	featureDeleteDb => dummyFeatureLocking & featureEvictor & featureINCompressor & featureMemoryBudget
	featureLatch => dummyFeatureLocking & featureCheckLeaks & featureDeleteDb & featureEvictor & featureFileHandleCache & featureFSync & featureINCompressor & featureMemoryBudget & featureStatisticsLock & featureTreeVisitor & featureTruncateDb & featureVerifier
	featureLoggingSevere => featureEnvironmentLock
	featureLoggingFine => dummyFeatureLocking & featureEvictor & featureINCompressor
	featureLoggingInfo => featureChecksum & featureMemoryBudget
	featureLoggingBase | featureLoggingFinest => featureTransaction
	featureMemoryBudget => featureEvictor & featureLatch
	featureStatisticsLock | featureStatisticsTransaction => dummyFeatureLocking
	featureStatisticsEnvEvictor => featureEvictor
	featureStatisticsEnvFSync => featureFSync
	featureStatisticsEnvINCompressor => featureINCompressor
	featureStatisticsTransaction => featureTransaction
	featureStatisticsDatabase => featureTreeVisitor
	featureTransaction => dummyFeatureLocking & featureDeleteDb & featureTruncateDb
	featureTruncateDb => featureDeleteDb
	featureVerifier => featureINCompressor & featureTreeVisitor